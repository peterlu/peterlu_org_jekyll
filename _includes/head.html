<head>
  <meta charset="utf-8">
  <title>{% if page.title %}{{ page.title }}{% else %}{{ site.title }}{% endif %}</title>
  <meta name="description" content="{{ site.description }}">
  <meta name="author" content="{% if page.author %}{{ page.author }}{% else %}{{ site.author }}{% endif %}">

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="{{ "/assets/style.css" | prepend: site.baseurl }}">

  <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png">
<link rel="manifest" href="/assets/icons/site.webmanifest">
<link rel="mask-icon" href="/assets/icons/safari-pinned-tab.svg" color="#5bbad5">
<link rel="shortcut icon" href="/assets/icons/favicon.ico">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/icons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">

  <script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>
<script src="/assets/js/jquery.colorbox-min.js" type="text/javascript"></script>
<script src="/assets/js/slick.min.js" type="text/javascript"></script>
<script type="text/javascript">
var colloids_json;
var topics;
$(document).ready(function () {
  // Sticky Header
	createSticky($("#navheader"));

  
  $('.sort a').click(function(){
    $('.sort .current').removeClass('current');
      $(this).addClass('current');
 
      var selector = $(this).attr('data-filter');
			// fade all out
			$('.topic-container').hide().promise().done( function() {
				// Animation complete.
				$('.topic-container').detach().appendTo(".topic-hider");
				$('#research-researchtopics .row').remove();
				var i = 0;
				$('#research-researchtopics').append($('<div/>', {class: 'row'}));
				$('.topic-container').sort(function(a, b) {
  				return $(a).data('sort-op') < $(b).data('sort-op') ? -1 : 1;
				}).each(function( index ) {
					if(selector == "*" || $(this).hasClass(selector)){
						$('#research-researchtopics .row').last().append(this);
						i++;
						if(i > 2){      
							$('#research-researchtopics').append($('<div/>', {class: 'row'}));
							i = 0;
						}
					}
				});
				if(selector == "*"){
  				$('.topic-container').show();
				} else {
  				$('.topic-container.'+selector).show();
				}
				// rearange
				// fade in
			});

      return false;
    }); 

  // Image Gallery
  $('.gallery').colorbox({maxWidth:'100%', maxHeight:'100%', current: "{{ site.data.locale.image }} {current} {{ site.data.locale.outof }} {total}",
    rel:function() {        
        return $(this).data('rel');
    }
	});
	
	// VIdeo Gallery
  if($(window).width() > 700 && $(window).height() > 400){
		$('.videogallery').colorbox({iframe: true, innerWidth: 640, innerHeight: 390, current: "{{ site.data.locale.video }} {current} {{ site.data.locale.outof }} {total}",
			rel:function() {        
					return $(this).data('rel');
			}
		});
	} else {
	  $( "a.videogallery" ).each(function( index ) {
      $( this ).attr('href', $( this ).attr('data-althref'));
    });
	}
	
	
	// Slick Carousel of featured items on the front page
	$('.carousel').slick({
		dots: true,
		infinite: false,
		speed: 300,
		slidesToShow: 4,
		slidesToScroll: 4,
		responsive: [
			{
				breakpoint: 1024,
				settings: {
					slidesToShow: 3,
					slidesToScroll: 3,
					infinite: true,
					dots: true
				}
			},
			{
				breakpoint: 600,
				settings: {
					slidesToShow: 2,
					slidesToScroll: 2
				}
			},
			{
				breakpoint: 480,
				settings: {
					slidesToShow: 1,
					slidesToScroll: 1
				}
			}
			// You can unslick at a given breakpoint now by adding:
			// settings: "unslick"
			// instead of a settings object
		]
	});
window.addEventListener("message", receiveMessage, false);

});

 
function receiveMessage(event){
  var base_path = "https://mattgilbertnet.github.io/colloidsorg/";
  var html = event.data[0].content_html;
  var date = event.data[0].date_published;
  var title = event.data[0].title;
  html = html.replace(/src="\//g, 'src="'+base_path)
  html = html.replace(/href="\//g, 'href="'+base_path);
  var post_html = '<span class="colloids_back">&lt; Back</span><br/>'+
                  '<span class="date">'+date+'</span><br/>'+
                  '<h2 class="title">'+title+'</p>'+
                  html+
                  '<br/><span class="colloids_back">&lt; Back</span>';
  $('#colloidsembed').hide();
  $('#colloids_post_holder').html(post_html);
  $('#colloids_post_holder').removeClass("empty");
  $('.colloids_back').click(function(event){
    $('#colloids_post_holder').html("");    
    $('#colloids_post_holder').addClass("empty");
    $('#colloidsembed').show();
  });
}


function createSticky(sticky) {
	
	if (typeof sticky !== "undefined") {

		var	pos = sticky.offset().top,
				win = $(window);
			
		win.on("scroll", function() {
    		win.scrollTop() >= pos ? sticky.addClass("fixed") : sticky.removeClass("fixed");      
		});			
	}
}
</script>


  {% if jekyll.environment == "production" and site.google_analytics %}
  {% include google-analytics.html %}
  {% endif %}
</head>
